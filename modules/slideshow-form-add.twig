{% extends "form-base.twig" %}
{% import "forms.twig" as forms %}

{% block formTitle %}
  {% trans "Add Slideshow" %}
  {% endblock %}

{% block formButtons %}
  {% trans "Cancel" %}, XiboDialogClose()
  {% trans "Save" %}, $("#slideshowAddForm").submit()
{% endblock %}

{% block formFieldActions %}
  [{
  "field": "useDuration",
  "trigger": "init",
  "value": false,
  "operation": "is:checked",
  "actions": {
  ".duration-fields": { "display": "none" }
  }
  },{
  "field": "useDuration",
  "trigger": "change",
  "value": false,
  "operation": "is:checked",
  "actions": {
  ".duration-fields": { "display": "none" }
  }
  },{
  "field": "useDuration",
  "trigger": "init",
  "value": true,
  "operation": "is:checked",
  "actions": {
  ".duration-fields": { "display": "block" }
  }
  },{
  "field": "useDuration",
  "trigger": "change",
  "value": true,
  "operation": "is:checked",
  "actions": {
  ".duration-fields": { "display": "block" }
  }
  }]
{% endblock %}

{% block formHtml %}
  <div class="row">
    <div class="col-md-12">
      <ul class="nav nav-tabs" role="tablist">
        <li class="active"><a href="#general" role="tab" data-toggle="tab"><span>{% trans "General" %}</span></a></li>
      </ul>
      <form id="slideshowAddForm" class="XiboForm form-horizontal" method="post" action="{{ urlFor("module.widget.add", {type: module.widget.type, id: playlist.playlistId}) }}">
        <div class="tab-content">
          <div class="tab-pane active" id="general">
            <div class="row">

              <div class="col-sm-12">
                <div class="form-group well">
		  <label class="col-sm-3 control-label" for="ckeditor_library_select">{% trans "Library" %}</label>
		  <div class="col-sm-9">
                    <select id="ckeditor_library_select" class="form-control" data-linked-to="ta_text">
                      <option></option>
                      {% for item in media %}
                        {% if item.mediaType == "image" %}
			  <option value="{{ item.mediaId }}" data-image-url="{{ urlFor("library.download", {id: item.mediaId}) }}?preview=1">{{ item.name }}</option>
                        {% endif %}
                      {% endfor %}
                    </select>
		  </div>
                </div>
              </div>
	    </div>
	    
            {% set title %}{% trans "Set a duration?" %}{% endset %}
            {% set helpText %}{% trans "Select to provide a specific duration for this Widget" %}{% endset %}
            {{ forms.checkbox("useDuration", title, 0, helpText) }}

            {% set title %}{% trans "Duration" %}{% endset %}
            {% set helpText %}{% trans "The duration in seconds this should be displayed" %}{% endset %}
            {{ forms.number("duration", title, module.getModule().defaultDuration, helpText, "duration-fields", "required") }}

            {% set title %}{% trans "Media List" %}{% endset %}
	    {% set helpText %}{% trans "[MediaIds] between brackets " %}{% endset %}
	    {{ forms.input("mediaList", title, "", helpText) }}
          </div>

        </div>
      </form>
    </div>
  </div>
{% endblock %}
